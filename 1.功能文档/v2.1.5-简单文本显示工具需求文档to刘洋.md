# 简述

## 功能描述

需要设计一个**简单的文本显示工具**，可以方便地在**桌面和手机、平板**上使用。

工具可以**读入多个文本**。**多个文本之间不涉及分支逻辑**，因此**工具可以将文本顺序显示**。文本中**段落对话都简单对话，没有选项**。

**显示界面**中，**区分不同文本的显示区域**。针对不同文本显示区域，**有不同的展示要求**。

文档中，还**设定了文本显示时涉及的操作**。

## 功能要点

+ 使用场景
	可以在桌面和手机、平板等移动端使用。

+ 多段显示功能
	针对不涉及分支逻辑的多个顺序排列的文本，可以读入并显示。

+ 单段显示功能
	对于限定没有选项的简单顺序文本，可以读入并显示。

+ 显示画面需求
	单一文本中的文本可以在展示界面的不同位置显示，并且不同区域需要满足不同的显示要求。

+ 操作需求
	在文本显示的过程中，还需要玩家输入恰当的操作，显示过程才可以继续。

## 文档结构

在接下来的文档中，将工具主要分为**多段显示功能**与**单段显示功能**分别说明。其中单段显示功能是工具的核心功能。

对涉及到的**显示画面需求**和**操作需求**，会在文档中恰当位置说明，不会单独列出一级标题来描述。

文档的最后还会有本次文档所需要的资料清单。其中包括了显示工具在实际使用中，用到的基本图像资料。


# 多段显示功能

## 功能描述

对于没有分支逻辑的简单文本，可以按照顺序读入，并且依次显示。在显示的过程中，根据逻辑插入**开始画面**、**中间画面**、**结束画面**。在不同画面中，玩家正确输入操作后，游戏才会继续。

该功能的基本逻辑见下图。

![多段逻辑](http://i.imgur.com/7dP5wJl.png)

## 开始画面

当工具读入第一个文本后，首先显示开始画面。

![开始画面](http://i.imgur.com/IWA3kmj.png)

在开始画面，提示玩家在剧情过程中（剧情文本显示过程中），玩家需要保持手指接触屏幕，剧情才会继续。否则剧情将会暂停。

开始画面上有提示文字，包括较醒目的**标识文字**与较详细的**说明文字**。进入开始画面后，标识文字和说明文字立刻同时显示在画面上。

### 操作需求

在开始画面，**玩家手指接触屏幕后**，即可开始剧情文本显示。

### 提示文字

+ 标识文字
	内容：开始
	要求：宋体，字号较大（未定，但是与**中间画面、结束画面**中标识文字保持一致）。左右居中，上下**偏上**（上下位置未定，但是与**中间画面、结束画面**中标识文字保持一致）。

+ 说明文字
	内容：触碰屏幕以开始剧情（换行）如果手指离开屏幕，剧情将会暂停
	要求：宋体，字号较小（未定，但是与**中间画面、结束画面**中标识文字保持一致）。左右居中，上下**偏下**（上下位置未定，但是与**中间画面、结束画面**中说明文字保持一致）。

## 中间画面

如果读入的文本如果不是第一个和最后一个，那么文本结束时，显示中间画面。

![中间画面](http://i.imgur.com/z9Qvl9M.png)

在中间画面，提示玩家手指离开屏幕来结束上一段剧情。手指再次接触屏幕，将会开始下一段剧情。

中间画面上有提示文字，包括较醒目的**标识文字**与较详细的**说明文字**。进入开始画面后，标识文字和说明文字立刻同时显示在画面上。

### 操作需求

在中间画面，**玩家手指离开屏幕，并再次接触屏幕后**，立刻开始下一段剧情文本显示。

### 提示文字

+ 标识文字

	内容：幕间
	要求：宋体，字号较大（未定，但是保持一致）。左右居中，上下**偏上**（上下位置未定，但是保持一致）。

+ 说明文字

	内容：松开手指以结束本段（换行）再次触碰屏幕以开始下一段
	要求：宋体，字号较小（未定，但是保持一致）。左右居中，上下**偏下**（上下位置未定，但是保持一致）。

## 结束画面

如果是最后一个，那么文本结束时，显示结束画面。

![结束画面](http://i.imgur.com/fgjvN9J.png)

在结束画面，提示玩家手指离开屏幕来结束上一段剧情。再次点击屏幕，以完成本次测试。

结束画面上有提示文字，包括较醒目的**标识文字**与较详细的**说明文字**。进入开始画面后，标识文字和说明文字立刻同时显示在画面上。

### 操作需求

在结束画面，**玩家手指离开屏幕后，再次点击屏幕（接触屏幕，然后离开屏幕）**，则立即结束程序。

### 提示文字

+ 标识文字

	内容：结束
	要求：宋体，字号较大（未定，但是保持一致）。左右居中，上下**偏上**（上下位置未定，但是保持一致）。

+ 说明文字

	内容：松开手指以结束本段（换行）再次点击以彻底结束
	要求：宋体，字号较小（未定，但是保持一致）。左右居中，上下**偏下**（上下位置未定，但是保持一致）。

## 功能调整接口

对于以上需求，在工具使用过程中可能会更改，主要包括：

+ 标识文字字体、字号、及位置。
+ 说明文字字体、字号、及位置。
+ 文字出现、结束方式。
+ 背景替换，及出现、结束方式。
+ 操作中响应时间间隔。

# 单段显示功能

## 功能描述

本功能主要用于显示单一文本中的剧情。文本中文字顺序显示，不包括选项。

文字在不同区域显示，分为上方的**背景声音区域**和下方的**对话区域**。

上方区域显示周围的环境音。显示的文字不明确角色归属，显示方式相对多变，显示文字之间没有明显的逻辑关系。

下方区域显示多名角色之间的相互对话。显示的文字明确属于某名角色，显示方式较固定、变化较少。显示文字之间有明确的顺序关系。

![样图](http://i.imgur.com/Ygad1lF.png)

下面首先说明对话区域，之后说明背景声音区域。

## 文本显示格式

文本中**文字段**格式遵循如下规则：

角色与区域标识-【文字间隔标识】【角色状态标识】【声音状态标识】对话文本。【背景音持续标识】

其中**角色与区域标识**用来区分这个文本是对话还是背景音，这段对话属于主要角色还是NPC角色。在文本中，为了方便阅读，角色与区域标识都会加粗显示。这个标示与之后的内容以``-``字符（减号字符）相连。

**文字间隔标识**在对话和背景音中出现。用来描述上一段文字结束后，到这一段文字出现，其间间隔的长短。这个标示用以说明文字出现节奏。

**角色状态标识**只会出现在对话中。该表示会出现在``【】``符号（中文大括号）中。

**声音状态标识**在对话和背景音中都会出现。该表示会出现在``【】``符号（中文大括号）中。

之后会接着需要显示的**对话文本**。文本结束后，如果没有**背景音持续标识**，则以``/n``符号（回车，或换行符）结束。

**背景音持续标识**只用于背景音中。说明环境中对话文本所表示的背景音出现的时间长短。

举例：

+ 对话示例

	例子：素和-【快】【小声】跟这帮蛮子真是说不清楚！
	说明：**角色与区域标识**为“素和”，不是5个主要角色的标识，因此为NPC角色。**文字间隔标识**为“快”。**声音状态表示**为“小声”。表示一名叫素和的NPC，在上面一段文字结束后，很快就小声说了一句话。

	例子：素谨-【心理】【大声】这帮蛮子，真是傻得可爱。
	说明：**角色与区域标识**为“素谨”，是5个主要角色的标识之一，因此为主要角色。**角色状态标识**为“心理”。**声音状态表示**为“大声”。表示，一名叫素谨的主要角色，在心里产生了一个明显的想法。这个文字段中没有**文字间隔标识**，说明这个想法产生的时机，没有很快，也没有很慢。


+ 背景音示例

	例子：背景音-【大声】哈哈哈哈哈。【慢】
	说明：**角色与区域标识**为“背景音”，因此显示在背景音区域。**声音状态表示**为“大声”。**背景音持续标识**为“慢”。表示在环境中，有什么东西发出了“哈哈哈哈哈”的声音，声音还很大，持续了一段时间才消失。

## 对话区域

该区域中区分主要角色和NPC角色。主要角色文字**靠右**显示，NPC角色对话**靠左**显示。该区域中区分主要角色的对话和心理活动。文字会自上而下出现。当旧文字已经填满显示区域后，新文字会出现在区域下方，并且旧文字自动上移一段位置。

该区域显示风格可以**参考微信**。

![对话区域样图](http://i.imgur.com/UVkvoRl.png)



### 主要功能

主要功能包括：

+ 能够识别主要角色和NPC角色。区分标识。

	使用**角色与区域标识**来区分。
	剧情中主要角色有5名。这5名角色的对话靠右显示。5名角色的标识分别为：**素谨、鵰萍、师姐、师妹、师叔**。
	剧情中出现的其余角色为npc，他们的对话靠左显示。

+ 主要角色区分对话和心理活动。区分标识。

	仅限于主要角色，使用**角色状态标示**区分。
	标识只有一个，为：**心理**。
	如果这标识出现，则使用心理活动相关的图像资料。否则使用对话相关的图像资料。

+ 头像和与对话。

	剧情中，文本中的**文字段**都需要独立显示。显示内容包括头像和对话文字。
	对于**主要角色**，头像在右，对话文字在左。
	对于**NPC角色**，头像在左，对话文字在右。
	当前情况下，头像在使用相关图像资料的基础上，把文本中的**角色与区域标识**作为头像，放置在画面上。例如这句话是素谨说的，那么显示的头像就是**文字**素谨。

	头像要求：
	图像组件+角色与区域标识。标识上下左右居中。文字为宋体，字号适中。

	对话要求：
	图像组件+对话文字。文字在组件中上下居中，靠左对齐（主要角色和NPC角色均如此）。文字为宋体，字号适中。

+ 文字显示位置。

	在对话区域没有被填满前，文字段自上而下依次显示。显示时，上一段文字的下沿与这一段文字的上沿间隔固定距离。具体参考设计图。

+ 文字滚动方向。

	对话区域填满后，还有新的文字段要在区域中显示时，旧的文字需要向上移动一段距离。移动距离在满足限定条件的情况下，自动生成。

	限定条件：新文字下沿与对话区域下沿间隔固定距离。新文字上沿与最后一条旧文字下沿间隔固定距离。

+ 文字出现方式。

	文字段内容直接出现在界面上，不做动画要求。

	
## 背景声音区域

该区域中会显示没有归属的文字，用于表现环境音。文字大多居中显示。根据某些情况，文字的显示方式会发生变化，用以描述环境音和主要角色之间的位置关系，以及环境音的特点。例如环境音的大小，突然性等。

### 主要功能

主要功能包括：

+ 文字。

	字体为宋体，字号适中。文字上下左右居中，多行文字靠左对齐。

+ 文字的出现、消失。

	文字直接出现，直接消失，没有动画效果。

+ 文字的持续时间。

	文字在区域内出现的时间。暂定为1s。如果持续时间结束之前，需要有新的文字出现，那么新文字直接替换旧文字。

## 文字顺序显示需求

在文本中，所有对话都是顺序排列。这也要求两个区域内的对话依照文本中的排列顺序，在不同的显示区域顺序显示。即，当前对话文本出现后，需要间隔一段时间，才能出现下一个对话文本。这个时间间隔，使用**文字间隔标识**来确定。具体为：

+ 时间间隔起算时间点。

	起算时间点为**上一个文字段出现的时刻**。

+ 指定时间间隔。

	时间间隔分为5档，分别为：**很快、快、普通、慢、很慢**。除了**普通**档不特别声明外，其他四档均有相应的文字间隔标识声明。即，如果没有文字间隔标识，则默认时间间隔为**普通**。间隔档位，标识，时间间隔对应关系如下：

|时间间隔档位|很快|快|慢|很慢|普通|
|-----|-----|-----|-----|-----|-----|
|文字间隔标识|很快|快|慢|很慢|无|
|时间间隔|0.25s|0.5s|3s|5s|1s|

## 操作方式

在文本显示过程中，玩家需要保持手指与屏幕接触。**当玩家手指离开屏幕**，那么剧情暂停。**玩家手指再次接触屏幕**，剧情继续。

## 功能调整接口

在之后的使用中，可能会增加的功能为：

1. 根据**声音状态标识**更改对话区域、背景声音区域中相对应文字的字号。

2. 更改对话区域、背景声音区域中文字的字体。

3. 重新调整文字段之间的显示间隔。

	一种思路是，在文字间隔标识所代表的时间间隔的基础上，加入一定余量。这个余量根据该文字段中对话文本的长短而变化。

	另一种思路是，改变计算文字段时间间隔的开始与结束时间。

	均有待测试与讨论。

4. 对话区域文字出现、滚动加入渐变等动画效果。

5. 背景声音区域文字出现、消失键入渐变等动画效果。

6. 背景声音区域内文字持续时间，按照**背景音持续标识**划分。

7. 背景声音区域内文字替换规则重新设计。

8. 背景声音区域内为出现位置可以不固定在中心。

9. 背景声音区域内文字位置可以在展现的过程中改变。

8. 背景声音区域内同时可以展现多个文字段。
 

# 设计图

待定

# 资料清单

待定


